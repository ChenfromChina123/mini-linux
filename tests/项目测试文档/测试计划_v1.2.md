# 测试计划 v1.2（Mini Linux Shell）

## 1. 文档目的

本测试计划用于指导并记录 Mini Linux Shell 的自动化回归测试工作，覆盖核心交互链路、基础命令功能、异常接口行为以及粗粒度性能回归，确保在迭代开发中功能稳定、行为一致。

## 2. 测试范围

### 2.1 覆盖范围

- 交互登录流程：用户登录、基础内置命令（help/whoami/exit）
- 文件操作链路：创建、写入/追加、读取、复制、删除（mytouch/myecho/mycat/mycp/myrm）
- 目录操作链路：递归创建、切换目录、列目录（mymkdir/mycd/myls）
- 接口/异常行为：未知命令提示、重定向一致性、读取不存在文件的错误提示
- 性能回归（粗粒度）：批量命令执行的耗时上限与输出完整性

### 2.2 不在范围内

- Linux 专有功能的精确行为验证（如 /proc 解析、作业控制、信号等）
- 真实系统用户与权限模型（本项目为内部用户系统）
- 复杂并发与压力场景（当前仅提供轻量性能回归）

## 3. 测试策略

### 3.1 测试类型与原则

- 功能测试：以端到端交互脚本驱动，验证关键链路与输出关键字
- 接口测试：对典型异常输入进行回归，验证错误提示与可继续交互
- 性能测试：采用简单时间阈值回归（避免环境差异导致不稳定）

### 3.2 用例组织方式

用例按模块划分并以 Python/pytest 运行：

- 模块A（功能）：`tests/项目测试文档/测试用例/模块A_功能测试.py`
- 模块B（接口）：`tests/项目测试文档/测试用例/模块B_接口测试.py`
- 模块C（性能）：`tests/项目测试文档/测试用例/模块C_性能测试.py`

## 4. 测试环境与依赖

### 4.1 运行环境

- 操作系统：Windows（当前仓库默认环境）
- Python：建议 3.10+（本仓库当前可用 Python 解释器即可）

### 4.2 依赖

- Python 依赖文件：`requirements.txt`
- 关键依赖：`pytest`

安装依赖：

```bash
python -m pip install -r requirements.txt
```

## 5. 测试数据

测试数据以脚本方式提供，便于复用与扩展：

- 数据生成脚本：`tests/项目测试文档/测试数据/数据生成脚本.py`

说明：

- 当前用例主要使用 `tmp_path` 生成临时文件/目录，不污染真实环境
- 若后续需要批量用户数据，可在数据脚本中扩展并在用例中引用

## 6. 测试执行方式

### 6.1 执行全部用例

```bash
python -m pytest -q
```

### 6.2 生成“迭代1”执行日志

该脚本会运行 pytest，并将结果写入 Markdown 日志文件：

```bash
python tests/项目测试文档/执行记录/迭代1_执行日志.py
```

输出位置：

- `tests/项目测试文档/执行记录/迭代1_执行日志.md`

## 7. 通过/失败准则

- 通过准则：pytest 用例全部通过或按约定跳过（例如主程序未构建时跳过）
- 失败准则：存在任意失败用例，或批量性能回归超过阈值

## 8. 风险与应对

- 环境差异导致波动：性能用例仅做粗粒度阈值验证，并允许合理余量
- 二进制未构建：用例对未构建场景做跳过处理，避免阻断纯 Python 环境的执行
- 输出文案变化：断言尽量使用关键字而非完整匹配，降低不必要的脆弱性

