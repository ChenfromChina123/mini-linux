# 版本 1.0 测试报告（Mini Linux Shell）

## 1. 测试概述
本报告总结了 Mini Linux Shell 1.0 版本的测试执行情况，涵盖了基础命令、用户管理及环境适配性测试。

- **测试日期**：2026-01-11
- **测试环境**：Windows (PowerShell) / Linux (仿真测试)
- **测试工具**：pytest, shell 脚本

## 2. 测试用例与结果汇总

| 用例 ID | 测试模块 | 测试场景 | 预期结果 | 执行结果 | 备注 |
| :--- | :--- | :--- | :--- | :--- | :--- |
| TC-001 | 基础功能 | 登录与 Help 命令 | 正常显示帮助信息 | **SKIPPED** | Windows 环境跳过 Linux 二进制测试 |
| TC-002 | 文件操作 | touch/echo/cat/cp/rm | 文件创建、读写、复制、删除成功 | **SKIPPED** | Windows 环境跳过 Linux 二进制测试 |
| TC-003 | 目录操作 | mkdir/cd/ls | 目录创建、切换、列表显示成功 | **SKIPPED** | Windows 环境跳过 Linux 二进制测试 |
| TC-004 | 用户管理 | 用户创建、登录、修改密码 | 用户数据持久化且能成功登录 | **SKIPPED** | 依赖 Linux 环境脚本执行 |
| TC-005 | 进程管理 | myps 跨平台检查 | Windows 环境识别为非 Linux 系统 | **PASSED** | 逻辑分支验证通过 |
| TC-006 | 编辑器 | myvi 编辑保存 | 模拟输入流能成功保存文件 | **SKIPPED** | 依赖 Linux 终端控制 |

> **执行统计**：1 Passed, 5 Skipped (主要由于 Windows 环境限制)。

## 3. 项目不足之处分析

经过本次测试与代码审计，发现本项目存在以下不足：

### 3.1 跨平台兼容性缺失
- **现状**：核心功能大量使用了 `fork()`, `execvp()`, `/proc` 文件系统等 Linux 特有的系统调用。
- **影响**：无法在原生 Windows 环境下编译运行，必须依赖 WSL 或 Cygwin。

### 3.2 管道与后台任务支持薄弱
- **现状**：目前 Shell 仅支持简单的命令分发，不支持 `|` 管道符连接多个进程。
- **影响**：无法实现复杂的工作流（如 `myls | mygrep`），功能受限。

### 3.3 信号处理机制不完善
- **现状**：主进程对 `Ctrl+C` (SIGINT) 等信号的捕获和处理不够健壮。
- **影响**：在执行子进程时，按下中断键可能导致整个 Shell 异常退出或产生僵尸进程。

### 3.4 脚本执行依赖路径
- **现状**：用户管理脚本（如 `myuseradd.sh`）硬编码了部分路径或依赖特定的执行目录。
- **影响**：当 PATH 环境变量配置不当时，脚本调用容易失效。

### 3.5 权限管理简化
- **现状**：内部用户系统通过 `.mini_users` 明文或简单平铺文件存储。
- **影响**：缺乏真正的内核级权限隔离，安全性较低。

## 4. 改进建议
1. **容器化部署**：提供 Dockerfile 以确保测试环境的一致性。
2. **引入管道符解析**：增强 `shell.c` 中的解析逻辑，支持多进程链式调用。
3. **增加 Windows 适配层**：使用 `Win32 API` 重写部分核心进程管理逻辑。
