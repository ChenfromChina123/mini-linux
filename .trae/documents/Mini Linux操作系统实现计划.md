# Mini Linux操作系统实现计划（带命令记录功能）

## 架构设计

1. **主程序（shell）**：负责接收用户命令，解析并执行
2. **用户系统**：处理用户登录、权限管理
3. **命令系统**：实现各种文件操作命令
4. **命令记录系统**：记录用户使用的命令和执行结果
5. **辅助函数库**：提供通用工具函数

## 文件结构

| 文件名 | 功能描述 |
|--------|----------|
| shell.h | 主程序头文件，定义命令结构体和声明 |
| shell.c | 主程序实现，包含命令解析和执行循环 |
| user.h | 用户系统头文件，定义用户结构体和声明 |
| user.c | 用户系统实现，包含登录、权限检查等 |
| command.h | 命令声明头文件 |
| history.h | 命令记录系统头文件 |
| history.c | 命令记录系统实现，记录命令和结果 |
| mycat.c | mycat命令实现，读取文件内容 |
| myrm.c | myrm命令实现，删除文件 |
| myvi.c | myvi命令实现，简单文件编辑 |
| mytouch.c | mytouch命令实现，创建空文件 |
| myecho.c | myecho命令实现，写入文件内容 |
| util.h | 辅助函数头文件 |
| util.c | 辅助函数实现 |
| Makefile | 编译规则定义 |

## 核心功能实现

### 1. 主程序（shell.c）
- 实现用户登录功能
- 命令行提示符显示当前用户名
- 解析用户输入的命令和参数
- 查找并执行相应的命令函数

### 2. 用户系统（user.c）
- 支持root和普通用户登录
- root用户可创建和删除用户
- 实现基本的权限检查

### 3. 命令记录系统（history.c）
- 记录用户输入的每条命令
- 记录命令的执行结果（成功/失败）
- 支持查看历史命令记录

### 4. 文件操作命令
- **mycat**：读取并显示文件内容
- **myrm**：删除指定文件
- **myvi**：简单的文件编辑器，支持创建和修改文件
- **mytouch**：创建空文件
- **myecho**：向文件写入内容

## 编译和运行

1. 使用Makefile编译所有源文件
2. 运行生成的可执行文件
3. 输入用户名和密码登录（默认root/root, user/user）
4. 在命令提示符下输入命令进行操作

## 实现步骤

1. 创建所有必要的头文件和源文件
2. 实现基础的shell框架和用户系统
3. 实现命令记录系统
4. 实现各个文件操作命令
5. 编写Makefile管理编译
6. 测试所有功能

## 预期效果

- 成功登录系统
- 执行各种文件操作命令
- 自动记录所有命令和执行结果
- 支持查看命令历史
- root用户可管理用户
- 命令行界面简洁易用