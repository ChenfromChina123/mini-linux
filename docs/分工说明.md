# Mini Linux Shell 开发分工说明

## 项目概述

开发一个轻量级的自定义Linux Shell，具有基本的命令执行、文件操作、目录管理、进程监控和用户认证功能。

## 团队成员及分工

### 1. 成员A - 核心Shell开发
**角色**：核心架构师
**负责范围**：Shell主程序、命令解析、多进程执行

#### 具体任务
1. **设计并实现主Shell框架**
   - 实现命令行提示符和用户输入处理
   - 开发命令解析和参数分割功能
   - 实现多进程执行机制（fork+waitpid）

2. **负责文件**
   - `shell.h` - 主Shell头文件，定义命令结构体和声明
   - `shell.c` - 主Shell实现，包含命令解析和执行循环

3. **功能要求**
   - 动态命令提示符，显示当前用户名
   - 支持命令历史记录显示
   - 正确处理内置命令和外部命令

4. **完成期限**
   - 第1周：完成基本框架设计和命令解析
   - 第2周：实现多进程执行和命令历史
   - 第3周：调试和优化

### 2. 成员B - 用户认证系统
**角色**：安全模块开发
**负责范围**：用户登录、权限管理、用户数据存储

#### 具体任务
1. **设计并实现用户认证系统**
   - 实现用户登录和密码验证
   - 开发用户创建和删除功能
   - 实现基本权限检查机制

2. **负责文件**
   - `user.h` - 用户系统头文件，定义用户结构体
   - `user.c` - 用户系统实现，包含登录、权限检查等

3. **功能要求**
   - 支持root和普通用户登录
   - root用户可创建和删除用户
   - 实现基本的权限检查

4. **完成期限**
   - 第1周：完成用户结构体设计和初始化
   - 第2周：实现登录和用户管理功能
   - 第3周：调试权限检查机制

### 3. 成员C - 文件与目录操作命令
**角色**：命令实现开发
**负责范围**：文件操作命令、目录操作命令

#### 具体任务
1. **实现文件操作命令**
   - `mycat`：显示文件内容
   - `myrm`：删除文件
   - `myvi`：简单文件编辑器
   - `mytouch`：创建空文件
   - `myecho`：向文件写入内容
   - `mycp`：复制文件（支持复制到目录、改进错误信息）
   - `mycd`：切换当前工作目录（支持 `~` 展开）
   - `mymkdir`：创建目录（支持 `-p` 递归创建父目录）

2. **实现目录操作命令**
   - `myls`：显示目录内容，支持长格式选项

3. **增强与持久化**
   - `help`：增强帮助输出，显示简短用法说明；可扩展为 `help <命令>` 的详细帮助
   - 命令历史：持久化到用户主目录的 `~/.mini_history`，程序启动时加载最近记录，执行时追加记录
   - 错误与日志：改进部分命令的错误信息以包含系统错误描述，便于调试
   - 用户持久化：`~/.mini_users`（用户名、密码、是否root），创建/删除自动保存
   - 会话跟踪：`~/.mini_sessions`（用户名、PID），跨终端显示“活跃用户”
   - 新增命令：`users`（显示所有用户与活跃用户）、`passwd`（修改密码）

4. **负责文件**
   - `command.h` - 命令声明头文件
   - `mycat.c`、`myrm.c`、`myvi.c`、`mytouch.c`、`myecho.c`、`mycp.c`、`myls.c`

5. **功能要求**
   - 每个命令对应一个独立的C文件
   - 实现命令的基本功能和错误处理
   - 支持命令的基本选项
6.**Agent**
   - 开发一个终端智能体
   - 实现智能体与用户的交互
   - 支持文件读写、编辑、搜索等操作
   - 支持命令执行和长期运行任务管理

7. **完成期限**
   - 第1周：实现基础文件操作命令（mycat、myrm、mytouch）
   - 第2周：实现高级文件操作命令（myvi、myecho、mycp）
   - 第3周：实现目录操作命令（myls）和测试

### 4. 成员D - 进程管理与辅助功能
**角色**：辅助功能开发
**负责范围**：进程管理命令、命令历史、工具函数、文档

#### 具体任务
1. **实现进程管理命令**
   - `myps`：显示进程信息，支持多种选项

2. **开发辅助功能**
   - 命令历史记录系统
   - 实用工具函数
   - 编写Makefile编译规则

3. **负责文件**
   - `history.h`、`history.c` - 命令历史系统
   - `util.h`、`util.c` - 辅助函数
   - `myps.c` - 进程管理命令
   - `Makefile` - 编译规则
   - `README.md` - 项目文档

4. **功能要求**
   - 记录命令历史，包含时间戳和执行结果
   - 实现进程信息显示
   - 提供实用的工具函数
   - 编写清晰的文档和编译规则

5. **完成期限**
   - 第1周：实现工具函数和命令历史
   - 第2周：实现进程管理命令和Makefile
   - 第3周：编写文档和系统测试

## 协作机制

### 代码规范
- 遵循C语言编码规范，使用有意义的变量名和函数名
- 每个函数必须有注释说明功能、参数和返回值
- 头文件使用#ifndef/#define/#endif保护

### 版本控制
- 使用Git进行版本控制
- 每个成员创建自己的分支，完成功能后合并到主分支
- 定期提交代码，保持进度同步

### 会议与沟通
- 每周召开一次进度会议，汇报完成情况和遇到的问题
- 建立微信群或其他即时通讯工具，方便日常沟通
- 遇到技术难题时，及时组织讨论，共同解决

### 测试与调试
- 每个成员负责自己模块的单元测试
- 每周进行一次集成测试，确保各模块协同工作
- 使用GDB进行调试，解决编译和运行时错误

## 里程碑

| 阶段 | 完成时间 | 预期成果 |
|------|----------|----------|
| 需求分析与设计 | 第1周初 | 系统架构设计、文件结构设计 |
| 核心功能开发 | 第1周末 | 主Shell框架、用户认证系统初步实现 |
| 命令实现 | 第2周末 | 所有命令基本实现完成 |
| 集成测试 | 第3周中 | 系统能正常运行，各模块协同工作 |
| 优化与文档 | 第3周末 | 系统优化、完整文档编写 |
| 项目交付 | 第4周初 | 可运行的Mini Linux Shell系统 |

## 注意事项

1. **安全性考虑**：避免缓冲区溢出和权限漏洞
2. **错误处理**：每个函数必须有适当的错误处理机制
3. **代码可读性**：保持代码结构清晰，注释完整
4. **性能优化**：避免不必要的系统调用和内存分配
5. **兼容性**：确保在Linux系统上能正常编译和运行


本分工说明将根据项目进展情况适时调整，确保项目顺利完成。
